<html>
    <head>
        <style type="text/css">
            *, html, body {
                margin: 0;
                padding: 0;
                background: #000;
            }
        </style>
        <title>My first Three.js app</title> <style>canvas { width: 100%; height: 100% } html,body { margin: 0; padding: 0; }</style>
    </head> 
<body>
    <script src="three.min.js"></script>
        <script id="vertexShader" type="x-shader/x-vertex">

            void main() {

                gl_Position = vec4( position, 1.0 );

            }

        </script>

        <script id="fragmentShader" type="x-shader/x-fragment">

            uniform vec2 resolution;
            uniform float time;

            void main() {

                vec2 p = -1.0 + 2.0 * gl_FragCoord.xy / resolution.xy;
                float a = time*40.0;
                float d,e,f,g=1.0/40.0,h,i,r,q;
                e=400.0*(p.x*0.5+0.5);
                f=400.0*(p.y*0.5+0.5);
                i=200.0+sin(e*g+a/150.0)*20.0;
                d=200.0+cos(f*g/2.0)*18.0+cos(e*g)*7.0;
                r=sqrt(pow(i-e,2.0)+pow(d-f,2.0));
                q=f/r;
                e=(r*cos(q))-a/2.0;f=(r*sin(q))-a/2.0;
                d=sin(e*g)*176.0+sin(e*g)*164.0+r;
                h=((f+d)+a/2.0)*g;
                i=cos(h+r*p.x/1.3)*(e+e+a)+cos(q*g*6.0)*(r+h/3.0);
                h=sin(f*g)*144.0-sin(e*g)*212.0*p.x;
                h=(h+(f-e)*q+sin(r-(a+h)/7.0)*10.0+i/4.0)*g;
                i+=cos(h*2.3*sin(a/350.0-q))*184.0*sin(q-(r*4.3+a/12.0)*g)+tan(r*g+h)*184.0*cos(r*g+h);
                i=mod(i/5.6,256.0)/64.0;
                if(i<0.0) i+=4.0;
                if(i>=2.0) i=4.0-i;
                d=r/350.0;
                d+=sin(d*d*8.0)*0.52;
                f=(sin(a*g)+1.0)/2.0;
                gl_FragColor=vec4(vec3(f*i/1.6,i/2.0+d/13.0,i)*d*p.x+vec3(i/1.3+d/8.0,i/2.0+d/18.0,i)*d*(1.0-p.x),1.0);

            }

        </script>
    <script>
        (function() {
            var scene
            ,   renderer
            ,   camera
            ,   container
            ,   W, H
            ,   sun
            ,   earth
            ,   moon
            ,   stars
            ,   sunMaterial
            ,   clock
            ,   uniforms;

            init();
            animate();

            function createStars(amount, color, opacity) {
                var geometry = new THREE.Geometry();
                var material = new THREE.ParticleBasicMaterial({ color: color, opacity: opacity, size: 1, sizeAttenuation: true });

                for (var i = 0; i < amount; i++) {
                    var vertex = new THREE.Vector3();

                    vertex.x = Math.random() * 2 - 1;
                    vertex.y = Math.random() * 2 - 1;
                    vertex.z = Math.random() * 2 - 1;

                    vertex.multiplyScalar(6000);
                    geometry.vertices.push(vertex);
                }

                return new THREE.ParticleSystem(geometry, material);
            }

            function createPlanet(o) {
                var planetGeometry = new THREE.SphereGeometry(o.size, o.segments, o.rings);
                var texture = THREE.ImageUtils.loadTexture(o.texture);
                texture.anisotropy = 8;
                var planetMaterial = new THREE.MeshPhongMaterial({ map: texture, emissive: 0xffffff });;
                return new THREE.Mesh(planetGeometry, planetMaterial);
            };

            function init() {

                // Dom
                container = document.createElement('div');
                document.body.appendChild(container);

                // Camera
                W = window.innerWidth;
                H = window.innerHeight;
                camera = new THREE.PerspectiveCamera(30, W/H, 1, 100000);
                camera.position.z = 4000;

                // Scene
                scene = new THREE.Scene();

                // Renderer
                renderer = new THREE.WebGLRenderer({
                    antialias: true,
                    clearColor: 0x000000
                });
                renderer.setSize(W, H);
                renderer.autoClear = false;
                container.appendChild(renderer.domElement);
                
                // Creating planets
                sun = createPlanet({
                    size: 700,
                    segments: 100,
                    rings: 100,
                    texture: 'textures/sun.png'
                });

                earth = createPlanet({
                    size: 80,
                    segments: 60,
                    rings: 60,
                    texture: 'textures/earth.jpg'
                });
                earth.position.x = 1000;

                moon = createPlanet({
                    size: 30,
                    segments: 30,
                    rings: 30,
                    texture: 'textures/moon.jpg'
                });


                scene.add(sun);
                scene.add(earth);
                scene.add(moon);

                // Stars
                stars = createStars(100000, 0x333333, 1);
                stars.scale.set(25, 25, 25);
                scene.add(stars);

                start2 = createStars(100000, 0xffffff, 0.6);
                start2.scale.set(27, 27, 27);
                scene.add(start2);

                stars3 = createStars(100000, 0xffffff, 1);
                stars3.scale.set(20, 20, 20);
                scene.add(stars3);

                // Light
                var ambientLight = new THREE.AmbientLight( 0x333333 );
                scene.add(ambientLight);
            };


            // variables for animating
            var t = 0;

            function animate() {
                requestAnimationFrame(animate);

                sun.rotation.y += 0.01;
                earth.rotation.y -= 0.01;
                moon.rotation.y += 0.02;

                camera.lookAt(earth.position);
                camera.position.x = Math.sin(t * 0.05) * 2500; 
                camera.position.y = Math.cos(t * 0.05) * 2500;
                camera.position.z = earth.position.z * Math.sin(t * 0.05) * 3;

                t += Math.PI / 180 * 2;
                earth.position.x = Math.sin(t * 0.2) * 2500;
                earth.position.z = Math.cos(t * 0.2) * 2500;


                moon.position.x = earth.position.x + Math.sin(t * 0.5) * 250;
                moon.position.z = earth.position.z + Math.cos(t * 0.5) * 250;

                renderer.render(scene, camera);
            };

        }());
    </script>
</body>
</html>